# Drawnix DDS è®¢é˜…è€…

ä¸€ä¸ªç‹¬ç«‹çš„å‘½ä»¤è¡Œç¨‹åºï¼Œç”¨äºç›‘å¬ Drawnix ç™½æ¿åº”ç”¨é€šè¿‡ DDS å‘å¸ƒçš„æ•°æ®å˜åŒ–ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **å®æ—¶ç›‘å¬** - ç›‘å¬ç™½æ¿å˜åŒ–å’Œå…ƒç´ å˜åŒ–æ¶ˆæ¯
- ğŸ“Š **è¯¦ç»†ç»Ÿè®¡** - æ˜¾ç¤ºæ¥æ”¶æ¶ˆæ¯çš„ç»Ÿè®¡ä¿¡æ¯
- ğŸ¨ **å½©è‰²è¾“å‡º** - ä½¿ç”¨é¢œè‰²åŒºåˆ†ä¸åŒç±»å‹çš„æ¶ˆæ¯
- â±ï¸ **çµæ´»æ§åˆ¶** - æ”¯æŒè¶…æ—¶è®¾ç½®å’Œä¼˜é›…é€€å‡º
- ğŸ§ª **æµ‹è¯•æ¨¡å¼** - å†…ç½®æµ‹è¯•åŠŸèƒ½éªŒè¯ DDS é€šä¿¡

## ğŸ“¦ ç¼–è¯‘

```bash
cd dds_subscriber
cargo build --release
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ç›‘å¬
```bash
./target/release/drawnix-dds-subscriber listen
```

### è¯¦ç»†æ¨¡å¼ç›‘å¬
```bash
./target/release/drawnix-dds-subscriber listen --verbose
```

### æŒ‡å®šåŸŸ ID å’Œè¶…æ—¶
```bash
./target/release/drawnix-dds-subscriber listen --domain-id 150 --timeout 60
```

### è¿è¡Œæµ‹è¯•
```bash
./target/release/drawnix-dds-subscriber test
```

## ğŸ“‹ å‘½ä»¤è¡Œé€‰é¡¹

### `listen` å‘½ä»¤

- `-d, --domain-id <DOMAIN_ID>` - DDS åŸŸ IDï¼ˆé»˜è®¤: 150ï¼‰
- `-v, --verbose` - æ˜¾ç¤ºè¯¦ç»†æ¶ˆæ¯å†…å®¹
- `-T, --timeout <SECONDS>` - ç›‘å¬è¶…æ—¶æ—¶é—´ï¼Œ0 è¡¨ç¤ºæ— é™æœŸï¼ˆé»˜è®¤: 0ï¼‰

### `test` å‘½ä»¤

- `-d, --domain-id <DOMAIN_ID>` - DDS åŸŸ IDï¼ˆé»˜è®¤: 150ï¼‰

## ğŸ“Š ç›‘å¬çš„ DDS ä¸»é¢˜

### DrawnixBoardChanges
ç™½æ¿æ•´ä½“å˜åŒ–æ•°æ®ï¼ŒåŒ…å«ï¼š
- å…ƒç´ æ•°é‡ç»Ÿè®¡
- æ“ä½œåˆ—è¡¨
- å˜åŒ–è¯¦æƒ…
- æ—¶é—´æˆ³

### DrawnixElementChanges  
å…ƒç´ çº§åˆ«å˜åŒ–æ•°æ®ï¼ŒåŒ…å«ï¼š
- æ–°å¢å…ƒç´ 
- åˆ é™¤å…ƒç´ 
- ä¿®æ”¹å…ƒç´ 
- æ—¶é—´æˆ³

## ğŸ¨ è¾“å‡ºæ ¼å¼

### åŸºç¡€æ¨¡å¼
```
[14:30:15.123] ğŸ“¨ #1 ğŸ“‹ ç™½æ¿å˜åŒ–
   ğŸ“Š å…ƒç´ æ•°é‡: 3
   ğŸ”§ æ“ä½œæ•°é‡: 1

[14:30:15.456] ğŸ“¨ #2 ğŸ”§ å…ƒç´ å˜åŒ–
   â• æ–°å¢: 1
   â– åˆ é™¤: 0
   ğŸ”„ ä¿®æ”¹: 2
```

### è¯¦ç»†æ¨¡å¼
åœ¨åŸºç¡€æ¨¡å¼åŸºç¡€ä¸Šï¼Œé¢å¤–æ˜¾ç¤ºï¼š
- å®Œæ•´çš„æ“ä½œæ•°æ® JSON
- è¯¦ç»†çš„å…ƒç´ å˜åŒ–å†…å®¹
- åŸå§‹æ¶ˆæ¯å†…å®¹ï¼ˆé”™è¯¯æ—¶ï¼‰

## ğŸ§ª æµ‹è¯•éªŒè¯

### 1. è‡ªåŠ¨åŒ–æµ‹è¯•
è¿è¡Œå®Œæ•´çš„å‘å¸ƒ-è®¢é˜…æµ‹è¯•ï¼š
```bash
cd ..
./test_pubsub.sh
```

### 2. æ‰‹åŠ¨æµ‹è¯•
1. å¯åŠ¨è®¢é˜…è€…ï¼š
   ```bash
   ./target/release/drawnix-dds-subscriber listen --verbose
   ```

2. åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨ Tauri åº”ç”¨ï¼š
   ```bash
   cd ../src-tauri
   cargo tauri dev
   ```

3. åœ¨ Tauri åº”ç”¨ä¸­è°ƒç”¨ DDS æµ‹è¯•å‘½ä»¤

4. è§‚å¯Ÿè®¢é˜…è€…ç»ˆç«¯çš„å®æ—¶è¾“å‡º

## ğŸ”§ æ•…éšœæ’é™¤

### æœªæ¥æ”¶åˆ°æ¶ˆæ¯
1. **æ£€æŸ¥åŸŸ ID** - ç¡®ä¿å‘å¸ƒè€…å’Œè®¢é˜…è€…ä½¿ç”¨ç›¸åŒçš„åŸŸ ID
2. **æ£€æŸ¥ ZRDDS å®‰è£…** - ç¡®ä¿ ZRDDS æ­£ç¡®å®‰è£…åœ¨ `/usr/ZRDDS/`
3. **æ£€æŸ¥æƒé™** - ç¡®ä¿æœ‰è®¿é—® DDS åŸŸçš„æƒé™
4. **æ£€æŸ¥é˜²ç«å¢™** - ç¡®ä¿ DDS é€šä¿¡ç«¯å£æœªè¢«é˜»å¡

### ç¼–è¯‘é”™è¯¯
1. **æ£€æŸ¥ä¾èµ–** - ç¡®ä¿ zrdds-safe åº“è·¯å¾„æ­£ç¡®
2. **æ£€æŸ¥ Rust ç‰ˆæœ¬** - éœ€è¦ Rust 1.70.0+
3. **æ£€æŸ¥ ZRDDS_ROOT** - ç¡®ä¿ç¯å¢ƒå˜é‡è®¾ç½®æ­£ç¡®

## ğŸ“š ç¤ºä¾‹åœºæ™¯

### ç›‘å¬ 5 åˆ†é’Ÿå¹¶ä¿å­˜æ—¥å¿—
```bash
./target/release/drawnix-dds-subscriber listen --verbose --timeout 300 > dds_messages.log 2>&1
```

### æµ‹è¯•è¿æ¥çŠ¶æ€
```bash
./target/release/drawnix-dds-subscriber test
```

### å¿«é€ŸéªŒè¯æ˜¯å¦æœ‰æ¶ˆæ¯
```bash
timeout 10s ./target/release/drawnix-dds-subscriber listen
```

## ğŸ¯ ä¸ä¸»åº”ç”¨é›†æˆ

è¿™ä¸ªè®¢é˜…è€…å¯ä»¥ç”¨äºï¼š
- **å¼€å‘è°ƒè¯•** - éªŒè¯ DDS æ¶ˆæ¯æ˜¯å¦æ­£ç¡®å‘å¸ƒ
- **ç³»ç»Ÿç›‘æ§** - ç›‘æ§ç™½æ¿æ´»åŠ¨å’Œæ€§èƒ½
- **æ•°æ®åˆ†æ** - è®°å½•å’Œåˆ†æç”¨æˆ·è¡Œä¸º
- **æ•…éšœè¯Šæ–­** - æ’æŸ¥ DDS é€šä¿¡é—®é¢˜

è®¢é˜…è€…ä¸ Drawnix Tauri åº”ç”¨å®Œå…¨ç‹¬ç«‹ï¼Œå¯ä»¥åœ¨ä¸åŒçš„æœºå™¨ä¸Šè¿è¡Œï¼Œå®ç°åˆ†å¸ƒå¼ç›‘æ§ã€‚
